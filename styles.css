/* Disable scrolling */
html, body {
   overflow: hidden;
   margin: 0;
   padding: 0;
   height: 100%;
   width: 100%;
  }
  
  /* Background image, NO overlay */
  body {
   background: url('images/background.jpg') no-repeat center center fixed;
   background-size: cover;
   font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
   display: flex;
   justify-content: center;
   align-items: center;
  }
  
  /* ipod-wrapper is just a flex container */
  .ipod-wrapper {
   display: flex;
   justify-content: center;
   align-items: center;
  }
  
  /* Define a base scale factor for 1mm */
  :root {
   --mm-to-px: 4px;
  }
  
  /* Zoom-in animation for iPod on page load */
  @keyframes ipodZoomIn {
  0% {
    transform: scale(0.8);
    opacity: 1;
  }
  70% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(1);
  }
  }
  
  /* Base iPod container size */
  .ipod-container {
   width: calc(40 * var(--mm-to-px));
   height: calc(55 * var(--mm-to-px));
   aspect-ratio: 40 / 55;
   background: linear-gradient(145deg, #e6e6e6, #cccccc);
   border-radius: calc(4 * var(--mm-to-px));
   display: flex;
   flex-direction: column;
   align-items: center;
   padding: calc(3 * var(--mm-to-px));
   box-sizing: border-box;
   box-shadow: 
   0 calc(0.2 * var(--mm-to-px)) calc(0.1 * var(--mm-to-px)) rgba(0,0,0,0.2),
   0 calc(0.5 * var(--mm-to-px)) calc(0.7 * var(--mm-to-px)) rgba(0,0,0,0.15),
   0 calc(1 * var(--mm-to-px)) calc(2 * var(--mm-to-px)) rgba(0,0,0,0.1),
   0 calc(2 * var(--mm-to-px)) calc(5 * var(--mm-to-px)) rgba(0,0,0,0.07),
   0 calc(4 * var(--mm-to-px)) calc(10 * var(--mm-to-px)) rgba(0,0,0,0.05),
   inset 0 calc(2 * var(--mm-to-px)) calc(3 * var(--mm-to-px)) rgba(255,255,255,0.1),
   inset 0 calc(-2 * var(--mm-to-px)) calc(3 * var(--mm-to-px)) rgba(0,0,0,0.05);
   position: relative;
   overflow: hidden;
   animation: ipodZoomIn 0.8s ease-out forwards; /* Added animation */
  }
  
  .ipod-container::before {
   content: '';
   position: absolute;
   top: 0; left: 0; right: 0; bottom: 0;
   border-radius: calc(4 * var(--mm-to-px));
   box-shadow: 
       inset calc(1 * var(--mm-to-px)) calc(1 * var(--mm-to-px)) calc(2 * var(--mm-to-px)) rgba(255,255,255,0.1),
       inset calc(-1 * var(--mm-to-px)) calc(-1 * var(--mm-to-px)) calc(2 * var(--mm-to-px)) rgba(0,0,0,0.05);
   pointer-events: none;
  }
  
  .screen {
   width: calc(35 * var(--mm-to-px));
   height: calc(22.5 * var(--mm-to-px));
   background-color: #fff;
   margin-bottom: calc(3 * var(--mm-to-px));
   display: flex;
   flex-direction: row;
   box-sizing: border-box;
   border-radius: calc(1 * var(--mm-to-px));
   border-top: calc(0.7 * var(--mm-to-px)) solid #333333;
   border-bottom: calc(0.7 * var(--mm-to-px)) solid #333333;
   border-left: calc(1.5 * var(--mm-to-px)) solid #333333;
   border-right: calc(1.5 * var(--mm-to-px)) solid #333333;
   box-shadow: 
       inset 0 0 calc(2 * var(--mm-to-px)) rgba(0,0,0,0.2),
       0 0 calc(1 * var(--mm-to-px)) rgba(255,255,255,0.5);
   overflow: hidden;
   position: relative;
  }
  
  #display {
   color: #000;
   font-size: calc(2 * var(--mm-to-px));
   font-weight: bold;
   width: calc(16 * var(--mm-to-px));
   display: flex;
   flex-direction: column;
  }
  
  /* Top grey bar */
  #menu-title {
   position: sticky;
   top: 0;
   z-index: 10;
   font-weight: bold;
   padding: calc(0.4 * var(--mm-to-px)) calc(1 * var(--mm-to-px)); /* slightly less vertical padding */
   font-size: calc(1.25 * var(--mm-to-px)); /* slightly smaller text */
   background: linear-gradient(to bottom, #ffffff, #bfbfbf); /* whiter at top, darker at bottom */
   color: #000;
   border-top-left-radius: calc(0.5 * var(--mm-to-px));
   border-top-right-radius: calc(0.5 * var(--mm-to-px));
   width: 100%;
   box-sizing: border-box;
   box-shadow: inset 0 calc(-0.5 * var(--mm-to-px)) calc(1 * var(--mm-to-px)) rgba(0,0,0,0.15);
  }
  
  #menu-container {
   position: relative;
   overflow-y: auto;
   overflow-x: hidden;
   flex-grow: 1;
  }
  
  /* Scrollbar styling */
  #menu-container::-webkit-scrollbar {
   width: calc(1px * var(--mm-to-px) / 4px);
  }
  #menu-container::-webkit-scrollbar-thumb {
   background-color: #888;
  }
  #menu-container {
   scrollbar-width: thin;
   scrollbar-color: #888 #f0f0f0;
  }
  
  #menu-list {
   list-style-type: none;
   padding: 0 calc(0.8 * var(--mm-to-px));
   margin: 0;
  }
  
  .menu-item {
   padding: calc(0.4 * var(--mm-to-px)) 0;
   font-weight: bold;
   font-size: calc(1.6 * var(--mm-to-px));
   position: relative; /* Needed for arrow positioning */
  }
  
  .menu-item.active {
   background: linear-gradient(to bottom, #4db8ff, #007aff);
   color: #fff;
   margin-left: calc(-1 * var(--mm-to-px));
   margin-right: calc(-1 * var(--mm-to-px));
   padding-left: calc(1 * var(--mm-to-px));
   padding-right: calc(4 * var(--mm-to-px)); /* extra space for bigger arrow */
   box-shadow: inset 0 calc(-1 * var(--mm-to-px)) calc(1 * var(--mm-to-px)) rgba(0, 0, 0, 0.1);
  }
  
  /* Arrow for active menu item */
  .menu-item.active::after {
    content: '';
    display: block;
    width: calc(3 * var(--mm-to-px));   /* bigger arrow */
    height: calc(3 * var(--mm-to-px));
    background: url('images/arrow.svg') no-repeat center center;
    background-size: contain;
    position: absolute;
    right: 0;   /* flush to the right edge */
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
  }
  
  /* Right-side display */
  #right-display {
   width: calc(16 * var(--mm-to-px));
   height: 100%;
   background: linear-gradient(
       to right,
       rgba(0,0,0,1) 0%,
       rgba(0,0,0,0.9) 2%,
       rgba(0,0,0,0.6) 4%,
       rgba(0,0,0,0.3) 7%,
       rgba(0,0,0,0.15) 9%,
       rgba(0,0,0,0) 12%
   ), transparent;
   display: flex;
   justify-content: center;
   align-items: center;
   padding: 0;
  }
  
  .display-icon {
   width: 100%;
   height: 100%;
   object-fit: cover;
   opacity: 0.8;
   user-select: none;
   -webkit-user-drag: none;
  }
  
  /* Clickwheel */
  .clickwheel {
   width: calc(22 * var(--mm-to-px));
   height: calc(22 * var(--mm-to-px));
   background: linear-gradient(145deg, #f0f0f0, #ffffff);
   border-radius: 50%;
   position: relative;
   box-shadow: 
       0 0 calc(2 * var(--mm-to-px)) rgba(0,0,0,0.1),
       inset 0 0 calc(4 * var(--mm-to-px)) rgba(255,255,255,0.5);
  }
  
  .button {
   position: absolute;
   width: calc(6 * var(--mm-to-px));
   height: calc(6 * var(--mm-to-px));
   display: flex;
   justify-content: center;
   align-items: center;
  }
  
  .top { top: -5%; left: 50%; transform: translateX(-50%); }
  .right { right: -3%; top: 50%; transform: translateY(-50%); }
  .bottom { bottom: -5%; left: 50%; transform: translateX(-50%); }
  .left { left: -3%; top: 50%; transform: translateY(-50%); }
  
  .center-button {
   position: absolute;
   width: calc(11 * var(--mm-to-px));
   height: calc(11 * var(--mm-to-px));
   background: radial-gradient(ellipse at bottom center, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 60%),
               linear-gradient(-145deg, #c0c0c0, #cccccc);
   border-radius: 50%;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   box-shadow: 
       inset 0 calc(-0.2 * var(--mm-to-px)) calc(0.5 * var(--mm-to-px)) rgba(255,255,255,0.25),
       inset 0 calc(0.2 * var(--mm-to-px)) calc(0.8 * var(--mm-to-px)) rgba(0,0,0,0.06);
  }
  
  .ipod-icon {
   width: calc(5 * var(--mm-to-px));
   height: calc(5 * var(--mm-to-px));
   object-fit: contain;
   user-select: none;
   -webkit-user-drag: none;
   pointer-events: none;
  }
  
  /* Desktop sizing */
  @media (min-width: 769px) {
   .ipod-container {
       width: min(400px, 90vw); 
       height: auto;
       max-height: 90vh;
       --mm-to-px: calc(min(400px, 90vw) / 40);
   }
  }
  
  /* Mobile responsive sizing */
  @media (max-width: 768px) {
   .ipod-container {
       width: min(90vw, calc(90svh * (40 / 55)));
       height: auto;
       max-width: 90vw;
       max-height: 90svh;
       --mm-to-px: calc(min(90vw, calc(90svh * (40 / 55))) / 40); 
   }
  }
  
  /* Theme styles */
  body.theme-light {
   /* Default theme, no changes needed */
  }
  
  body.theme-dark .ipod-container {
   background: linear-gradient(145deg, #333333, #222222);
   color: white;
  }
  
  body.theme-dark .screen {
   border-color: #555555;
  }
  
  body.theme-dark .clickwheel {
   background: #111111; /* Solid black clickwheel */
   box-shadow: 
       0 0 calc(2 * var(--mm-to-px)) rgba(0,0,0,0.3),
       inset 0 0 calc(4 * var(--mm-to-px)) rgba(0,0,0,0.5); /* Dark inset shadow instead of white */
  }
  
  body.theme-dark .center-button {
   background: #222222; /* Solid dark gray center button */
   box-shadow: 
       inset 0 calc(-0.2 * var(--mm-to-px)) calc(0.5 * var(--mm-to-px)) rgba(0,0,0,0.25),
       inset 0 calc(0.2 * var(--mm-to-px)) calc(0.8 * var(--mm-to-px)) rgba(0,0,0,0.3);
  }
  
  /* Make SVG icons white in dark theme */
  body.theme-dark .ipod-icon {
   filter: brightness(0) invert(1); /* This turns the icons white */
  }
  
  /* Mint theme - Light green-blue with white clickwheel */
  body.theme-mint .ipod-container {
   background: linear-gradient(145deg, #98CFD1, #7ABFC1);
   color: white;
  }
  
  body.theme-mint .screen {
   border-color: #555555;
  }
  
 /* Mint theme - Light green-blue with white clickwheel and mint center button */
body.theme-mint .ipod-container {
   background: linear-gradient(145deg, #98CFD1, #7ABFC1);
   color: white;
   }
   
   body.theme-mint .screen {
   border-color: #555555;
   }
   
   /* Clickwheel remains white like in light theme */
   body.theme-mint .clickwheel {
   background: linear-gradient(145deg, #f0f0f0, #ffffff);
   box-shadow: 
       0 0 calc(2 * var(--mm-to-px)) rgba(0,0,0,0.1),
       inset 0 0 calc(4 * var(--mm-to-px)) rgba(255,255,255,0.5);
   }
   
   /* Center button now mint */
   body.theme-mint .center-button {
   background: linear-gradient(145deg, #98CFD1, #7ABFC1);
   box-shadow: 
       inset 0 calc(-0.2 * var(--mm-to-px)) calc(0.5 * var(--mm-to-px)) rgba(255,255,255,0.25),
       inset 0 calc(0.2 * var(--mm-to-px)) calc(0.8 * var(--mm-to-px)) rgba(0,0,0,0.06);
   }